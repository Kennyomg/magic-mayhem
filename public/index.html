<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magic Mayhem</title>
  <script src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1" defer></script>
  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script type="module" crossorigin>var we=Object.defineProperty;var Ee=(s,e,t)=>e in s?we(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var j=(s,e,t)=>(Ee(s,typeof e!="symbol"?e+"":e,t),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();class m{static get _isGameInView(){const e=document.getElementById("game");return()=>window.scrollY<e.offsetTop+e.clientHeight-e.clientHeight/4*3}static emit(e){if(typeof e!="string"||!Array.isArray(e)||e.length===0)throw new Error("Invalid arguments, type should be a string");if(Array.isArray(e)){e.forEach(t=>this.emit(t));return}this._listeners.forEach(({_t:t,_cb:r})=>!e||t===e?r({event:null,isGameInView:this._isGameInView}):null)}static on(e,t,r){if(!(typeof e=="string"||Array.isArray(e)&&e.length>0&&typeof t=="function"))throw new Error(`Invalid arguments, type should be a string or an array of strings and callback should be a function

                         type: ${typeof e}("${e}"), callback: ${typeof t}("${t}")`);if(Array.isArray(e)){e.forEach(a=>this.on(a,t));return}this._listeners.push({_t:e,_cb:t}),r&&(r instanceof HTMLElement||Array.isArray(r)&&r.length>0)&&this.attachTo(e,r)}static attachTo(e,t){if(!(typeof e=="string"||Array.isArray(e)&&e.length>0&&(t instanceof HTMLElement||Array.isArray(t)&&t.length>0)))throw new Error("Invalid arguments, type should be a string or an array of strings and element should be an HTMLElement");if(Array.isArray(e)){if(Array.isArray(t)){e.forEach(r=>t.forEach(a=>this.attachTo(r,a)));return}e.forEach(r=>this.attachTo(r,t));return}if(Array.isArray(t)){t.forEach(r=>this.attachTo(e,r));return}this._attachedListeners.some(({_t:r,_el:a})=>!e||r===e&&a===t)&&this.detachFrom(e,t),this._listeners.forEach(({_t:r,_cb:a})=>!e||r===e?this._attachedListeners.push({_t:e,_cb:i=>a({event:i,isGameInView:this._isGameInView}),_el:t}):null),this._attachedListeners.forEach(({_t:r,_cb:a,_el:i})=>i.addEventListener(r,a))}static detachFrom(e,t){if(typeof e!="string"||!Array.isArray(e)||e.length===0||!(t instanceof HTMLElement)||!Array.isArray(t)||t.length===0)throw new Error("Invalid arguments, type should be a string or an array of strings and element should be an HTMLElement");if(Array.isArray(e)){if(Array.isArray(t)){e.forEach(r=>t.forEach(a=>this.detachFrom(r,a)));return}e.forEach(r=>this.detachFrom(r,t));return}if(Array.isArray(t)){t.forEach(r=>this.detachFrom(e,r));return}this._attachedListeners.forEach(({_t:r,_cb:a,_el:i})=>!e||r===e&&i===t?t.removeEventListener(r,a):null),this._attachedListeners=this._attachedListeners.filter(({_t:r,_el:a})=>!(!e||r===e&&a===t))}}j(m,"_listeners",[]),j(m,"_attachedListeners",[]);class A{static applyOn(e,t){if(!(e&&(typeof e=="string"||Array.isArray(e)&&e.length>0)&&t&&typeof t=="function"))throw new Error("Invalid arguments, (id: string | string[]) and (cb: function) are required");if(Array.isArray(e)){e.forEach(a=>this.applyOn(a,t));return}const r=document.getElementById(e);r?t(r,e):console.warn(`Element with id ${e} not found`)}static applyOnAll(e,t){if(!((e&&typeof e=="string"||Array.isArray(e)&&e.length>0)&&t&&typeof t=="function"))throw new Error("Invalid arguments, (selector: string | string[]) and (cb: function) are required");if(Array.isArray(e)){e.forEach(a=>this.applyOnAll(a,t));return}const r=document.querySelectorAll(e);r.length?r.forEach(t):console.warn(`Elements with selector ${e} not found`)}static findId(e){if(!(e&&(typeof e=="string"||Array.isArray(e)&&e.length>0)))throw new Error("Invalid arguments, (id: string) is required");if(Array.isArray(e))return e.map(r=>this.findId(r));const t=document.getElementById(e);if(t)return t;console.warn(`Element with id ${e} not found`)}}const O=40,N=20;let ie,ye,b,x,J="onorientationchange"in window&&"screen"in window,Ae=J?"orientationchange":"resize";var he;let se=((he=screen==null?void 0:screen.orientation)==null?void 0:he.type)||"landscape-primary";var pe;(pe=screen==null?void 0:screen.orientation)!=null&&pe.angle;document.getElementById("pause");function ne(){A.applyOn("game",s=>{if(ie=(J?screen.height:window.innerHeight)-s.offsetTop,b=ie-50,x=25/18*b,ye=Math.max(75,Math.min(100,(J?screen.width:window.innerWidth)-x-20)),x>window.innerWidth&&(x=window.innerWidth-20,b=18/25*x),s.style.width=k(x),s.style.height=k(b),A.applyOn(["pause","game-over"],e=>{e.style.top=k(b/2+s.offsetTop)}),s.children.length)for(const e of s.getElementsByClassName("cell"))e.style.width=k(x/O),e.style.height=k(b/N),e.style.fontSize=k(b/N)})}ne();window.addEventListener(Ae,()=>{J&&se!==screen.orientation.type&&(se=screen.orientation.type,screen.orientation.angle),ne()},!1);J&&window.addEventListener("resize",()=>ne(),!1);let v=3,_="",ee,d,T=!1,Le=!1;const K=class K{constructor(e,t=0){this.text=e,this.ignoreFrontWidth=t}static async fromFile(e,t=0){try{return new this(K.INLINE_SPRITES[e]||await fetch(e).then(r=>r.text()),t)}catch(r){throw console.error(r),new Error("Cannot load sprite from file")}}get lines(){return this.text.split(`
`).filter(Boolean)}get width(){return Math.max(...this.lines.map(e=>e.length))}get collisionWidth(){return this.width-this.ignoreFrontWidth}get height(){return this.lines.length}getCharAt(e,t,r){return e<0||e>this.width||t<0||t>this.height?(console.error(`Cannot get sprite char at x: ${e} and y: ${t}`),!1):r?this.lines[t][this.width-1-e]:this.lines[t][e]}};j(K,"INLINE_SPRITES",{"./light.txt":";=,^<","./medium.txt":`()
||/
/\\`,"./heavy.txt":`      /_
<()> /_
/  \\/
 ||
/  \\`,"./wizard.txt":`  x
 / \\ * *
 | | /*
 / \\/
 | |`});let Y=K,M;const oe=10,re=8,D=10,S="blue",q=4,le=re-1,U="red";let X;const ce=re-1,B=N-1,ae=q,ge=B-1;let F;const ue=B-1,R={EMPTY:"Â ",WALL:"#",PLAYER:"@",PORTAL:"O",SUMMON:"S"},L={LIGHT:{type:"LIGHT",x:1,y:B-1,sprite:void 0,speed:2,health:2,attack:1,team:"",mana_cost:1},MEDIUM:{type:"MEDIUM",x:1,y:B-1,sprite:void 0,speed:1,health:3,attack:2,team:"",mana_cost:2},HEAVY:{type:"HEAVY",x:1,y:B-1,sprite:void 0,speed:1,health:5,attack:1,team:"",mana_cost:3}};A.applyOn("summons",s=>{s.innerHTML="type, manacost, health, attack, speed<br/>",s.innerHTML+=Object.values(L).map(e=>`${e.type}, ${e.mana_cost}, ${e.health}, ${e.attack}, ${e.speed}`).join("<br/>")});let I;window.location.hostname.includes("localhost")||window.location.protocol==="http:"?I=new WebSocket(`ws://${window.location.host}/ws`):I=new WebSocket(`wss://${window.location.host}/ws`);I.onopen=()=>{console.log("Connected to server"),_?I.send(JSON.stringify({type:"join_lobby",data:_})):te().then(s=>{_=s,I.send(JSON.stringify({type:"join_lobby",data:_}))})};I.onclose=()=>{console.log("Disconnected from server")};(async()=>{console.log("magic-mayhem.js loaded"),A.applyOn("game-speed",c=>{c.textContent=v.toString()});let s=fe(A.findId("game")),e=!1,t=!1,r=0,a=!1,i=[],l="",h="",u=D,y=D;try{M=await Y.fromFile("./wizard.txt"),X=O-q-M.width,F=X+M.width-1,L.LIGHT.sprite=await Y.fromFile("./light.txt"),L.MEDIUM.sprite=await Y.fromFile("./medium.txt"),L.HEAVY.sprite=await Y.fromFile("./heavy.txt",3),console.log(L)}catch(c){console.error(c)}function G(c){const f=A.findId("game");f.innerHTML="",A.applyOn("game-over",E=>{E.classList.add("hidden")}),r=0,a=!1,i=[],u=D,y=D,l="",h="",s=fe(f),C(s,i),e=!1,t=!1,d&&confirm("Do you want to leave the game?")&&(T?(I.send(JSON.stringify({type:"delete_game",data:d})),T=!1):I.send(JSON.stringify({type:"leave_game",data:d})),d=null)}function W(c,f=-1){c&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation()),e=f<0?!e:f,document.getElementById("pause").classList.toggle("hidden",!e)}function Q(c,f){function E(n){if(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),!(e||t||Le||d&&!T)&&(!l&&c==="player"&&(l=f.dataset.summon),!h&&c==="opponent")){if(d&&T)return;h=f.dataset.summon}}m.on(["click","touchend"],E,f),f.addEventListener("click",E),f.addEventListener("touchend",E)}let $=!1;function Z(c){if($)return $=!1;if(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),t){G();return}W()}const V=A.findId(["game","pause","game-over"]);m.on(["click","touchend"],Z,V),m.on("touchstart",()=>$=!1,V),m.on("touchmove",()=>$=!0,V),A.applyOn(["player-buttons","opponent-buttons"],(c,f)=>{const E=f==="player-buttons"?"player":"opponent";c.width=ye;for(const n of c.getElementsByClassName("summon-button"))Q(E,n);m.on("scroll",({isGameInView:n})=>{c.classList.toggle("hidden",!n())})}),m.on("scroll",({isGameInView:c})=>W(null,!c())),m.attachTo("scroll",window),I.onmessage=({data:c})=>{const f=JSON.parse(c),E=A.findId("games");switch(f.type){case"broadcast":{if(console.log("Broadcast",f),d||!E)return;if(Array.isArray(f.data)){E.innerHTML="";let n=1;for(const p of f.data){if(console.log("game",p),p.opponentPeerId===_){d=p;break}if(p.hostPeerId===_&&p.opponentPeerId){if(T&&d)break;T=!0,d=p;break}if(p.hostPeerId===_){const g=document.createElement("button");g.textContent=`Waiting for opponent ${n}`,E.appendChild(g),n++;continue}const o=document.createElement("button");o.textContent=`Join game ${n}`,o.onclick=async()=>{console.log("Joining game",n);const g=_||await te();ee||(ee=new Peer(g,{host:window.location.hostname,port:window.location.port,path:"/peerjs/myapp"})),console.log("peer",g,ee),I.send(JSON.stringify({type:"join_game",data:{hostPeerId:p.hostPeerId,opponentPeerId:g}}))},E.appendChild(o),n++}}break}case"game_updated":{console.log("Game updated"),d.data=f.data,C(s,d.data.summons,d.data.playerMana,d.data.opponentMana);break}case"game_deleted":{d=null;break}case"spawn":{h=f.data.summon;break}default:{console.log("Unknown message",f);break}}},window.addEventListener("keydown",async c=>{switch(c.key){case"j":_||(_=await te()),I.send(JSON.stringify({type:"create_game",data:_}));break;case" ":if(c.preventDefault(),t)break;W();break;case"r":case"R":G();break;case"z":if(e)break;l||(l="LIGHT");break;case"x":if(e)break;l||(l="MEDIUM");break;case"c":if(e)break;l||(l="HEAVY");break;case"/":if(e)break;if(d){T||I.send(JSON.stringify({type:"spawn",data:{summon:"LIGHT",hostPeerId:d.hostPeerId}}));break}h||(h="LIGHT");break;case".":if(e)break;if(d){T||I.send(JSON.stringify({type:"spawn",data:{summon:"MEDIUM",hostPeerId:d.hostPeerId}}));break}h||(h="MEDIUM");break;case",":if(e)break;if(d){T||I.send(JSON.stringify({type:"spawn",data:{summon:"HEAVY",hostPeerId:d.hostPeerId}}));break}h||(h="HEAVY");break;case"+":v<100&&(v+=1,A.applyOn("game-speed",f=>{f.textContent=v.toString()}),w());break;case"-":v>1&&(v-=1,A.applyOn("game-speed",f=>{f.textContent=v.toString()}),w());break}});let P=null;function w(){clearInterval(P),P=setInterval(()=>{var c,f,E;if(!(d&&!T)){if(d&&(d.hostPeerId===_&&I.send(JSON.stringify({type:"update_game",data:{...d,data:{summons:i,playerMana:u,opponentMana:y}}})),d.opponentPeerId===_&&(i=(c=d.data)!=null&&c.summons?d.data.summons:[],u=((f=d.data)==null?void 0:f.playerMana)>=0?d.data.playerMana:D,y=((E=d.data)==null?void 0:E.playerMana)>=0?d.data.opponentMana:D,i.length))){C(s,i,u,y);return}if(!e){(!d||T)&&(l&&!i.some(n=>{var p,o;return n.team==="player"&&z(ae,ge,(o=(p=L[l])==null?void 0:p.sprite)==null?void 0:o.collisionWidth,1,n.x,n.y,n.sprite.width,n.sprite.height)})&&(u>=L[l].mana_cost&&u>=u-L[l].mana_cost&&(u-=L[l].mana_cost,i.push(de("player",l))),l=""),h&&!i.some(n=>{var p,o;return n.team==="opponent"&&z(F-((o=(p=L[h])==null?void 0:p.sprite)==null?void 0:o.collisionWidth),ue,F,1,n.x,n.y,n.sprite.width,n.sprite.height)})&&(y>=L[h].mana_cost&&y>=y-L[h].mana_cost&&(y-=L[h].mana_cost,i.push(de("opponent",h))),h="")),C(s,i,u,y);for(const n of i){const p=n.x+n.speed*n.direction;if(!i.some(o=>o!==n&&z(p,n.y,n.sprite.collisionWidth,n.sprite.height,o.x,o.y,o.sprite.collisionWidth,o.sprite.height)))p>0&&p<O-n.sprite.collisionWidth?n.x=p:(n.x=p<=0?1:O-n.sprite.collisionWidth-1,n.direction*=-1),a=!0;else{const o=i.find(g=>g!==n&&z(p,n.y,n.sprite.collisionWidth,n.sprite.height,g.direction>0?g.x:g.x+g.sprite.ignoreFrontWidth,g.y,g.sprite.collisionWidth,g.sprite.height));if(n&&o&&(n!=null&&n.type)&&(o!=null&&o.type)&&(n==null?void 0:n.type)==="LIGHT"&&(o==null?void 0:o.type)==="HEAVY"&&((n==null?void 0:n.team)===o.team||(n==null?void 0:n.direction)!==(o==null?void 0:o.direction))||(n==null?void 0:n.type)==="HEAVY"&&(o==null?void 0:o.type)==="LIGHT"&&((n==null?void 0:n.team)===(o==null?void 0:o.team)||(n==null?void 0:n.direction)!==(o==null?void 0:o.direction))){n.x=p,a=!0;continue}n&&o&&n.attack>0&&n.team!==o.team&&n.health>0&&o.health>0&&(o.health-=n.attack,o.health<=0&&(i=i.filter(g=>g!==o)),a=!0)}}a?r=0:r++,r>10&&!(u||y)&&(e=!0,t=!0,A.applyOn("game-over",n=>{n.innerHTML=`Draw!!\r
Press R or Tap here.`,n.classList.remove("hidden")}),C(s,i,u,y)),a=!1,!i.some(n=>n.team==="player")&&!u&&(e=!0,t=!0,A.applyOn("game-over",n=>{n.innerHTML=`<span style="color:${U};">${U.toUpperCase()}</span> Won!!\r
Press R or Tap here.`,n.classList.remove("hidden")}),C(s,i,u,y)),!i.some(n=>n.team==="opponent")&&!y&&(e=!0,t=!0,A.applyOn("game-over",n=>{n.innerHTML=`<span style="color:${S};">${S.toUpperCase()}</span> Won!!\r
Press R or Tap here.`,n.classList.remove("hidden")}),C(s,i,u,y))}}},1e3/v)}w()})();function k(s){return`${s}px`}async function te(){return await fetch(`${window.location.protocol}//${window.location.host}/peerjs/myapp/peerjs/id`).then(s=>s.body.getReader().read()).then(({value:s,done:e})=>new TextDecoder().decode(s))}function de(s,e){if(!(s==="player"||s==="opponent"))throw new Error("Invalid team");return{...L[e],x:s==="player"?ae:F-L[e].sprite.width+1,direction:s==="player"?1:-1,color:s==="player"?S:U,team:s}}function fe(s){return new Array(N).fill(null).map((e,t)=>(t>0&&s.appendChild(document.createElement("br")),new Array(O).fill(null).map(()=>{const r=document.createElement("span");return r.classList.add("cell"),r.style.width=k(x/O),r.style.height=k(b/N),r.style.fontSize=k(b/N),r.textContent=R.EMPTY,s.appendChild(r),r})))}function H(s,e,t,r,a,i){return s>=t&&s<t+a&&e<=r&&e>r-i}function z(s,e,t,r,a,i,l,h){return H(s,e,a,i,l,h)||H(s+t-1,e,a,i,l,h)||H(s,e-r,a,i,l,h)||H(s+t-1,e-r,a,i,l,h)}function C(s,e,t,r){e.sort((a,i)=>a.type===i.type?0:a.type==="HEAVY"&&i.type!=="HEAVY"||a.type==="MEDIUM"&&i.type==="LIGHT"?-1:(a.type==="LIGHT"&&i.type!=="LIGHT",1));for(let a=0;a<N;a++)for(let i=0;i<O;i++){const l=s[a][i],h=i===0||i===O-1||a===0||a===N-1,u=i>0&&(i<oe||i>O-1-oe)&&i<O-1&&a===re,y=H(i,a,q,le,M.width,M.height),G=H(i,a,X,ce,M.width,M.height),W=i===ae&&a===ge,Q=i===F&&a===ue,$=t&&(i===1||i<=t)&&a===1,Z=r&&(i===O-2||i>=O-1-r)&&a===1,V=e.some(P=>H(i,a,P.x,P.y,P.sprite.width,P.sprite.height));switch(!0){case(h||u):l.classList.add("wall"),l.textContent!==R.WALL&&(l.textContent=R.WALL);break;case $:l.textContent="*",l.style.color=S;break;case Z:l.textContent="*",l.style.color=U;break;case(y||G):{let P;(P=M.getCharAt(i-(y?q:X),a-(y?le:ce)+M.height-1,G))&&l.textContent!==P&&(l.textContent=P,l.style.color=y?S:U,G&&l.classList.add("reversed"));break}case V:{e.filter(w=>H(i,a,w.x,w.y,w.sprite.width,w.sprite.height)).forEach(w=>{const c=w.direction===-1,f=w.sprite.getCharAt(i-w.x,a-w.y+w.sprite.height-1,c);l.classList.toggle("reversed",c),l.textContent=f,l.style.color=w.color});break}case(W||Q):l.textContent!==R.PORTAL&&(l.textContent=R.PORTAL,l.style.color=W?S:U);break;default:l.textContent!==R.EMPTY&&(l.textContent=R.EMPTY);break}}}
</script>
  <style rel="stylesheet" crossorigin>body{font-family:Courier New,Courier,monospace;display:flex;justify-content:center}br{display:block;height:0}#game{width:fit-content;margin:0 auto}.cell{display:block;float:left;font-size:25px;line-height:1;font-family:Courier New,Courier,monospace;font-weight:700;color:#fff;background-color:#000}#game br{display:block;height:0;line-height:0;content:"";margin:0}.blue{color:#00f}.red{color:red}#pause{position:absolute;top:300px;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:30px;-webkit-user-select:none;user-select:none}#game-over{text-align:center;position:absolute;top:300px;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:30px;white-space:pre;-webkit-user-select:none;user-select:none}.summon-button{display:inline-block;aspect-ratio:1/1;font-size:min(100px,calc((100svh / 3) - 20px));font-family:Courier New,Courier,monospace;font-weight:700;color:#fff;background-color:#000;border:2px solid white;border-radius:50%;cursor:pointer;max-width:100%;text-align:center;line-height:1}#player-buttons,#opponent-buttons{touch-action:none;display:flex;flex-direction:column;gap:10px;width:min(100px,calc((100svh / 3) - 20px))}#player-buttons>.summon-button:hover,#player-buttons>.summon-button:active{color:#00f;border-color:#00f}#opponent-buttons>.summon-button:hover,#opponent-buttons>.summon-button:active{color:red;border-color:red}.hidden{display:none!important}.reversed{transform:rotateY(180deg)}.show-on-root,.mobile{display:none}.top{position:fixed;top:0}.middle{position:fixed;top:50%;transform:translateY(-50%)}.left{position:fixed;left:10px}.right{position:fixed;right:10px}.bottom{position:fixed;bottom:0}.vertical{display:flex;flex-direction:column}#warning-message{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:30px}@media screen and (max-width: 425px){#game,.mobile-landscape{display:none}#warning-message{display:block}}@media screen and (min-width: 425px) and (max-width: 868px) and (orientation: landscape){.mobile{display:block}.vertical{display:flex}}@media screen and (min-width: 868px){.mobile{display:none}}
</style>
</head>

<body style="background-color: black; color: white;">
  <google-cast-launcher style="position:fixed;top:1rem;right:2rem;width:50px;"></google-cast-launcher>
  <script>
    window['__onGCastApiAvailable'] = (isAvailable) => {
      if (isAvailable) {
        cast.framework.CastContext.getInstance().setOptions({
          receiverApplicationId: 'FE311E58',
          autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
        });
        
        const castButton = document.querySelector('google-cast-launcher');
        castButton.addEventListener('cast-connect', () => {
          console.log('Connected to Cast');
          // Send html element with id 'game' to cast device
          cast.framework.CastContext.getInstance().getCurrentSession().sendMedia({
            media: {
              contentId: 'game',
              contentType: 'text/html',
              streamType: chrome.cast.StreamType.BUFFERED
            }
          });
          
          // cast.framework.CastContext.getInstance().getCurrentSession().
        });
        castButton.addEventListener('cast-disconnect', () => {
          console.log('Disconnected from Cast');
        });
    
        const castSession = cast.framework.CastContext.getInstance().getCurrentSession();
        if (castSession) {
          console.log('Connected to Cast');
        }
      }
    };

  </script>
  <div class="mobile-landscape">
    <div style="position: relative; width: fit-content;">
      <h1 class="show-on-root" style="text-align: center;">Magic Mayhem</h1>
      <!-- Playing field -->
      <div id="game"></div>
      <div id="pause" class="hidden">Game Paused</div>
      <div id="game-over" class="hidden"></div>
      <div class="show-on-root" style="font-size: large;">
        <br>
        <!-- List of online games -->
        <div id="games"></div>
        <br>
        Game speed: <span id="game-speed">not set</span> <br><br>
        Summons: <br> <span id="summons">not set</span> <br><br>
        Controls: <br>
        &nbsp;&nbsp;&nbsp;&nbsp;Spacebar - pause <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"z x c" - summon blue L M & H <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"/ . ," - summon red L M & H <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"r" - restart <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"j" - create online game <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"+" - speed up <br>
        &nbsp;&nbsp;&nbsp;&nbsp;"-" - slow down <br>
      </div>
      <br class="show-on-root">
      <div style="font-size: larger;" class="show-on-root">
        <p style="max-width: 700px; padding: 0; margin: 0;">
          At the Ministry of Magic, deep inside the Magic Vault, works Harold. Harold is a Magic Scribe apprentice and
          intern in the Magic Archives. He's tasked with transcribing every single duel between summoners throughout
          history. The deadline is 48 hours. With paper and pencil Harold presents: the epic battles of Magic Mayhem!
        </p>
      </div>
    </div>
    <div id="player-buttons" class="mobile middle left vertical">
      <button data-summon="HEAVY" class="summon-button">H</button>
      <button data-summon="MEDIUM" class="summon-button">M</button>
      <button data-summon="LIGHT" class="summon-button">L</button>
    </div>
    <div id="opponent-buttons" class="mobile middle right vertical">
      <button data-summon="HEAVY" class="summon-button">H</button>
      <button data-summon="MEDIUM" class="summon-button">M</button>
      <button data-summon="LIGHT" class="summon-button">L</button>
    </div>
  </div>
  <div id="warning-message" class="mobile center top">
    <h1>Warning!</h1>
    <p>This game is best played in landscape.</p>
    <p>Please turn your phone.</p>
    <p>Thank you!</p>
  </div>

  <script defer>
    if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
      document.querySelectorAll('.show-on-root').forEach(el => el.style.display = 'block');
    } else {
      document.body.style.overflowY = 'hidden';
    }
  </script>
</body>

</html>